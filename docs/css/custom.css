@import url('https://fonts.googleapis.com/css2?family=Source+Serif+4:opsz,wght@8..60,300;8..60,400;8..60,500;8..60,600&family=Open+Sans:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap');

/* =========================
   BASE TYPOGRAPHY
   ========================= */

/* Body text - clean serif */
body {
  font-family: 'Source Serif 4', Georgia, serif;
  font-size: 16px;
  font-weight: 300;
  line-height: 1.5;
}

/* Let content inherit (prevents tables/TOC from being “locked” by p/li rules) */
p, li, blockquote {
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  line-height: inherit;
}

/* =========================
   TABLES (mkdocs-shadn wraps tables)
   ========================= */

/* Table block spacing (theme sets large default margins) */
.typography {
  --l10-table-block-gap: 0.5rem;
  --l10-table-block-gap-after-h2: 0.75rem;
  --l10-table-block-gap-after-heading: 0.6rem;
  --l10-table-block-gap-before-heading: 1rem;
  --l10-table-head-padding-y: 0.2rem;
}

/* Remove table wrapper border + kill wrapper spacing */
figure:has(table),
/* your known wrappers */
[data-slot="table-container"],
.table-wrapper,
/* generic wrapper used by many shadcn-ish docs themes */
.typography :is(div, section):has(> table),
.prose :is(div, section):has(> table) {
  border: none !important;
  border-bottom: none !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Table text */
article table,
.typography table,
table {
  font-family: 'Source Serif 4', Georgia, serif !important;
  font-size: 14px !important;
  line-height: 1.3 !important;
  width: 100%;
  border-collapse: collapse;
  margin: 0 !important;
  border-bottom: none !important;
}

/* Cells (keep consistent with table font-size) */
.typography th,
.typography td,
th, td {
  font-size: 13px !important;
  line-height: 1.3 !important;
  padding: 0.4rem 0.8rem !important;
  text-align: left;
}

/* Header row: tighten top padding even more (this is the "red gap" look) */
.typography thead th,
thead th {
  height: auto !important;
  min-height: 0 !important;
  padding-top: var(--l10-table-head-padding-y) !important;
  padding-bottom: var(--l10-table-head-padding-y) !important;
  font-weight: 600;
 
}

/* If your markdown renderer wraps cell text in p/li, force it to inherit cell size */
.typography td p,
.typography th p,
td p, th p,
.typography td li,
.typography th li,
td li, th li {
  font-size: inherit !important;
  line-height: inherit !important;
  margin: 0 !important;
}

/* ===== mkdocs-shadn: h2 -> div.table-wrapper -> table ===== */

/* Tighten spacing BETWEEN the heading and the table wrapper */
.typography h2 + :is(.table-wrapper, [data-slot="table-container"]) {
  margin-top: var(--l10-table-block-gap-after-h2) !important;
  padding-top: 0 !important;
}

.typography h3 + :is(.table-wrapper, [data-slot="table-container"]),
.typography h4 + :is(.table-wrapper, [data-slot="table-container"]) {
  margin-top: var(--l10-table-block-gap-after-heading) !important;
  padding-top: 0 !important;
}

/* Remove any theme-added wrapper spacing/border */
.typography .table-wrapper {
  margin-top: var(--l10-table-block-gap) !important;
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  border: 0 !important;
}

/* Reduce the theme's default "gap" AFTER a wrapped table (next block's margin-top) */
.typography .table-wrapper + :is(p, pre, ul, ol, blockquote, div, figure, details) {
  margin-top: var(--l10-table-block-gap) !important;
}

/* Keep section separation when a heading follows a table */
.typography .table-wrapper + :is(h2, h3, h4, h5, h6) {
  margin-top: var(--l10-table-block-gap-before-heading) !important;
}

/* If the wrapper has an inner overflow div in some pages, nuke it too */
.typography .table-wrapper > :is(div, section) {
  margin: 0 !important;
  padding: 0 !important;
}

/* Reduce the "air" inside the header row (this is often the main visual gap) */
.typography .table-wrapper thead th {
  height: auto !important;
  min-height: 0 !important;
  padding-top: var(--l10-table-head-padding-y) !important;
  padding-bottom: var(--l10-table-head-padding-y) !important;
}

/* Optional: slightly tighten all rows */
.typography .table-wrapper td,
.typography .table-wrapper th {
  padding-top: 0.35rem !important;
  padding-bottom: 0.35rem !important;
}

/* =========================
   HEADINGS
   ========================= */

/* Headings - target content area */
.typography h1 {
  font-family: 'Source Serif 4', Georgia, serif;
  font-weight: 300;
  font-size: 1.7rem !important;
  margin-bottom: 1.5rem !important;
}

.typography h2 {
  font-family: 'Source Serif 4', Georgia, serif;
  font-weight: 300 !important;
  font-size: 1.4rem !important;
  margin-top: 1rem !important;
  margin-bottom: 0 !important;
  padding-bottom: 0;
  border-bottom: none;
}

.typography h3 {
  font-family: 'Source Serif 4', Georgia, serif;
  font-weight: 300 !important;
  font-size: 1.25rem !important;
  margin-top: 1.5rem !important;
  margin-bottom: 0.75rem !important;
}

.typography h4 {
  font-family: 'Source Serif 4', Georgia, serif;
  font-weight: 300 !important;
  font-size: 1.1rem !important;
  margin-top: 2rem !important;
  margin-bottom: 0 !important;
}

.typography h5,
.typography h6 {
  font-family: 'Open Sans', -apple-system, sans-serif;
  font-weight: 200;
}

/* =========================
   CONDITIONAL SPACING
   (update the table-related ones to hit WRAPPERS)
   ========================= */

/* --- Heading → Heading --- */
h1 + h2 { margin-top: 0.25rem !important; }
h1 + h3 { margin-top: 1rem !important; }
h2 + h3 { margin-top: 1rem !important; }
h2 + h4 { margin-top: 1rem !important; }
h3 + h4 { margin-top: 1rem !important; }

/* --- Heading → Content --- */
h2 + p { margin-top: 1rem !important; }
h2 + pre { margin-top: 1rem !important; }
h2 + figure { margin-top: 1rem !important; }

/* IMPORTANT: table is wrapped, so use :has(table) */
h2 + :is(div, figure, section):has(table) { margin-top: 0.25rem !important; padding-top: 0 !important; }

h3 + p { margin-top: 1rem !important; }
h3 + pre { margin-top: 0.7rem !important; }
h3 + figure { margin-top: 1rem !important; }
h3 + :is(div, figure, section):has(table) { margin-top: 0.8rem !important; }

h4 + p { margin-top: 1rem !important; }
h4 + pre { margin-top: 0.7rem !important; }
h4 + figure { margin-top: 1rem !important; }
h4 + :is(div, figure, section):has(table) { margin-top: 0.8rem !important; }

/* --- Content → Heading --- */
p + h2 { margin-top: 1rem !important; }
p + h3 { margin-top: 1rem !important; }
p + h4 { margin-top: 1rem !important; }

/* When a wrapped-table block precedes a heading */
:is(div, figure, section):has(table) + h2 { margin-top: 1rem !important; }
:is(div, figure, section):has(table) + h3 { margin-top: 1rem !important; }
:is(div, figure, section):has(table) + h4 { margin-top: 1rem !important; }

pre + h2 { margin-top: 1rem !important; }
pre + h3 { margin-top: 1rem !important; }
pre + h4 { margin-top: 1rem !important; }

/* --- Content → Content --- */
p + p { margin-top: 0.75rem !important; }
p + ul { margin-top: 0.5rem !important; }
p + pre { margin-top: 1rem !important; }
ul + p { margin-top: 1rem !important; }
pre + p { margin-top: 1rem !important; }
pre + pre { margin-top: 1rem !important; }

/* p → wrapped table */
p + :is(div, figure, section):has(table) { margin-top: 1rem !important; }

/* wrapped table → p / wrapped table → pre */
:is(div, figure, section):has(table) + p { margin-top: 1rem !important; }
:is(div, figure, section):has(table) + pre { margin-top: 1rem !important; }
:is(div, figure, section):has(table) + :is(div, figure, section):has(table) { margin-top: 1rem !important; }

/* First/last child cleanup */
article > *:first-child {
  margin-top: 0 !important;
}
article > *:last-child {
  margin-bottom: 0 !important;
}

/* =========================
   CODE
   ========================= */

/* Inline code */
code {
  font-family: 'Roboto Mono', monospace !important;
  font-size: 12px !important;
  padding: 0 !important;
  border-radius: 3px !important;
}

/* Code blocks */
pre {
  font-family: 'Roboto Mono', monospace;
  font-size: 10px;
  padding: 1.25rem;
  border-radius: 6px;
  margin: 1rem 0;
  white-space: pre-wrap;
  word-wrap: break-word;
  overflow-x: visible;
}

pre code {
  font-family: 'Roboto Mono', monospace;
  font-size: 10px;
  background: none;
  padding: 0;
  color: inherit;
}

/* =========================
   LAYOUT / SIDEBARS / TOC
   ========================= */

/* Show left sidebar - let theme handle responsiveness */
[data-slot="sidebar-wrapper"] {
  display: grid !important;
  grid-template-columns: var(--sidebar-width) minmax(0, 1fr) !important;
}

[data-slot="sidebar"] {
  display: flex !important;
}

/* Hide page header (shows nav title like "Home") */
#page-header {
  display: none !important;
}

/* Header logo - fixed size, not responsive */
header h1 {
  font-size: 1.125rem !important;
  font-weight: 600 !important;
  margin: 0 !important;
  font-family: 'Open Sans', sans-serif !important;
}

/* Style right TOC container - position and font */
div:has(> [view-transition-name="toc"]) {
  top: 7rem !important;
}

[view-transition-name="toc"] a {
  font-size: 12px !important;
  font-family: 'Open Sans', sans-serif !important;
  transition: color 0.15s ease;
}

[view-transition-name="toc"] a:hover {
  color: #60a5fa !important;
}

[view-transition-name="toc"] a.active,
[view-transition-name="toc"] a[aria-current="true"],
[view-transition-name="toc"] a[data-active="true"],
[view-transition-name="toc"] li.active a,
[view-transition-name="toc"] .is-active a,
[view-transition-name="toc"] a[href].active {
  color: #3b82f6 !important;
  font-weight: 600 !important;
}

/* Maximize content width within theme grid */
article, .prose, .md-content__inner {
  max-width: 100% !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  padding: 0 2rem !important;
}

.md-content {
  max-width: 100% !important;
}

/* Responsive: hide TOC on narrow screens */
@media (max-width: 1100px) {
  [view-transition-name="toc"],
  [style*="view-transition-name: toc"] {
    display: none !important;
  }
}
